<!DOCTYPE html>
<html style="height: 150%">
   <head>
       <meta charset="utf-8">
   </head>
   <body style="height: 220%; margin: 0">
       <div id="container" style="height: 100%"></div>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-gl/dist/echarts-gl.min.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-stat/dist/ecStat.min.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/extension/dataTool.min.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/map/js/china.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/map/js/world.js"></script>
       <script type="text/javascript" src="https://api.map.baidu.com/api?v=2.0&ak=xfhhaTThl11qYVrqLZii6w8qE5ggnhrY&__ec_v__=20190126"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts/dist/extension/bmap.min.js"></script>
       <script type="text/javascript">
var dom = document.getElementById("container");
var myChart = echarts.init(dom);
var app = {};
option = null;
var colors = ['#FFAE57', '#FF7853', '#94081e', '#E31939','#f1506a' ];
var bgColor = '#EFEFEF';
var celcolors = ['#C9CBCC', '#E31939', '#f1506a'];

var itemStyle = {
    star5: {
        color: colors[0]
    },
    star4: {
        color: colors[1]
    },
    star3: {
        color: colors[2]
    },
    star2: {
        color: colors[3]
    },
    star1: {
        color: colors[4]
    }
};

var data = [{
    name: '生产\n要素',
    itemStyle: {
        normal: {
            color: celcolors[1]
        }
    },
    children: [{
        name: '研发能力',
        children: [{
            name: '3☆',
            children: [{
                name: '专利支持'
            }]
        }, {
            name: '2☆',
            children: [{
                name: '资本运作'
            }, {
                name: '扁平化公司管理体系'
            }]
        }, {
            name: '1☆',
            children: [{
                name: '企业文化'
            },{
                name:'发展历史'
            },{
                name:'Space X'
            }]
        }]
    }]
},{
    name: '需求条件',
    itemStyle: {
        normal: {
            color: celcolors[1]
        }
    },
    children: [{
        name: '生产能力',
        children: [{
            name: '3☆',
            children: [{
                name: '制造流程'
            }, {
                name: '技术发展'
            }]
        }, {
            name: '2☆',
            children: [{
                name: '扁平化公司管理体系'
            }]
        }, {
            name: '1☆',
            children: [{
                name: '美学形态'
            }]
        }]
    }, {
        name: '市场规模',
        children: [{
            name: '3☆',
            children: [{
                name: '营销策略'
            }, {
                name: '市场需求'
            }, {
                name: 'Model车型系列'
            }]
        }, {
            name: '2☆',
            children: [{
                name: '中国政府'
            }, {
                name: '人的需求'
            }, {
                name: '国际环境'
            }, {
                name: '免费充电'
            }]
        }, {
            name: '1☆',
            children: [{
                name: 'Vi设计'
            }, {
                name: '特斯拉官网'
            }, {
                name: '电动超跑'
            }, {
                name: 'Space X'
            }]
        }]
    }]
},
{
    name: '企业战略',
    itemStyle: {
        normal: {
            color: celcolors[1]
        }
    },
    children: [{
        name: '产品质量',
        children: [{
            name: '3☆',
            children: [{
                name: '超长续航'
            }, {
                name: '电力系统'
            }]
        }, {
            name: '2☆',
            children: [{
                name: 'APP'
            }, {
                name: '自动驾驶'
            }]
        }, {
            name: '1☆',
            children: [{
                name: '特斯拉电动汽车'
            }, {
                name: '自动泊车'
            }, {
                name: '电动全驱'
            }, {
                name: '360°视野范围'
            }, {
                name: '高强度车身'
            }]
        }]
    }, {
        name: '成本控制',
        children: [{
            name: '3☆',
            children: [{
                name: '免费充电'
            }, {
                name: '制造流程'
            }]
        }, {
            name: '2☆',
            children: [{
                name: '超级充电站'
            }]
        }, {
            name: '1☆',
            children: [{
                name: '电池保修'
            }, {
                name: 'On/off-line维护'
            }, {
                name: '供应链安全'
            }]
        }]
    }]
},
{
    name: '相关\n产业',
    itemStyle: {
        normal: {
            color: celcolors[1]
        }
    },
    children: [{
        name: '供应链\n完善度',
        children: [{
            name: '3☆',
            children: [{
                name: '供应链安全'
            }]
        }, {
            name: '2☆',
            children: [{
                name: '产业政策'
            }, {
                name: '国际环境'
            }, {
                name: '资本运作'
            }]
        }, {
            name: '1☆',
            children: [{
                name: '发展历史'
            }]
        }]
    }]
},
{
    name: '政府',
    itemStyle: {
        normal: {
            color: celcolors[1]
        }
    },
    children: [{
        name: '政策支持',
        children: [{
            name: '3☆',
            children: [{
                name: '产业政策'
            }]
        }, {
            name: '2☆',
            children: [{
                name: '中国政府'
            }]
        }, {
            name: '1☆',
            children: [{
                name: '环保理念'
            }]
        }]
    }]
},
{
    name: '机会',
    itemStyle: {
        normal: {
            color: celcolors[1]
        }
    },
    children: [{
        name: '发展机遇',
        children: [{
            name: '3☆',
            children: [{
                name: '“钢铁侠”'
            }, {
                name: '技术发展'
            }]
        }, {
            name: '2☆',
            children: [{
                name: '环境挑战'
            }, {
                name: '自动驾驶'
            }, {
                name: '产业政策'
            }]
        }, {
            name: '1☆',
            children: [{
                name: '中国政府'
            }, {
                name: '人的需求'
            }, {
                name: '国际环境'
            }, {
                name: 'Space X'
            }, {
                name: '市场需求'
            }, {
                name: '能源产品'
            }, {
                name: '审美趋势'
            }, {
                name: '社会思潮'
            }]
        }]
    }]
}];

for (var j = 0; j < data.length; ++j) {
    var level1 = data[j].children;
    for (var i = 0; i < level1.length; ++i) {
        var block = level1[i].children;
        var bookScore = [];
        var bookScoreId;
        for (var star = 0; star < block.length; ++star) {
            var style = (function (name) {
                switch (name) {
                    case '5☆':
                        bookScoreId = 0;
                        return itemStyle.star5;
                    case '4☆':
                        bookScoreId = 1;
                        return itemStyle.star4;
                    case '3☆':
                        bookScoreId = 2;
                        return itemStyle.star3;
                    case '2☆':
                        bookScoreId = 3;
                        return itemStyle.star2;
                    case '1☆':
                        bookScoreId = 3;
                        return itemStyle.star1;
                }
            })(block[star].name);

            block[star].label = {
                color: bgColor,
                downplay: {
                    opacity: 0.1
                }
            };
            block[star].itemStyle = {//修改itemstyle即为其底色
                color:style.color,
                downplay:{
                    opacity:0.1
                }
            };

            if (block[star].children) {
                style = {
                    opacity: 1,
                    color: style.color
                };
                block[star].children.forEach(function (book) {
                    book.value = 1;
                    book.itemStyle = style;

                    book.label = {
                        color: style.color
                    };

                    var value = 1;
                    if (bookScoreId === 0 || bookScoreId === 3) {
                        value = 5;
                    }

                    if (bookScore[bookScoreId]) {
                        bookScore[bookScoreId].value += value;
                    }
                    else {
                        bookScore[bookScoreId] = {
                            color: colors[bookScoreId],
                            value: value
                        };
                    }
                });
            }
        }

        level1[i].itemStyle = {//第二圈色彩
            color: '#AEB0B2'
        };
    }
}

option = {
    backgroundColor: bgColor,
    color: colors,
    series: [{
        type: 'sunburst',
        center: ['50%', '48%'],
        data: data,
        sort: function (a, b) {
            if (a.depth === 1) {
                return b.getValue() - a.getValue();
            }
            else {
                return a.dataIndex - b.dataIndex;
            }
        },
        label: {
            rotate: 'radial',
            color: bgColor
        },
        itemStyle: {//间隙大小与色彩
            borderColor: bgColor,
            borderWidth: 4
        },
        levels: [{}, {//内部小环
            r0: 80,
            r: 140,
            label: {
                rotate: 0
            }
        }, {
            r0: 140,//第二圈环
            r: 205
        }, {
            r0: 206,//第三圈环(重要度)
            r: 240,
            itemStyle: {
                shadowBlur: 0,
                shadowColor: celcolors[2],
               // color: itemStyle.color,//搞定这玩意的授予一等功
            },
            label: {
                rotate: 'tangential',
                fontSize: 10,
                color: bgColor
            }
        }, {
            r0: 240,//外圈文字内细线
            r: 245,
            itemStyle: {
                shadowBlur: 0,
                shadowColor:celcolors[1],
            },
            label: {
                position: 'outside',//最外文字
                textShadowBlur: 0,
                textShadowColor: '#333',
            },
            downplay: {
                label: {
                    opacity: 0.2,
                }
            }
        }]
    }]
};;
if (option && typeof option === "object") {
    myChart.setOption(option, true);
}
;
if (option && typeof option === "object") {
    myChart.setOption(option, true);
}
       </script>
   </body>
</html>